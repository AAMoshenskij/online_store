# Описание сервисов в docker-compose.yml

## Источники данных

### Postgres

- Основная база данных для хранения транзакционных данных
- Используется версия 15
- Содержит базу данных `online_store`
- Доступна на порту 5432
- Данные сохраняются в именованном томе `postgres_data`
- Имеет скрипты инициализации в директории `init/postgres`

## Message Broker (Брокер сообщений)

### Zookeeper

- Координационный сервис для Kafka
- Используется для управления конфигурацией Kafka
- Работает на порту 2181
- Обеспечивает синхронизацию между брокерами Kafka

### Kafka

- Распределенная система обмена сообщениями
- Используется для передачи данных между сервисами
- Работает на порту 9092
- Настроена с одним брокером (KAFKA_BROKER_ID: 1)
- Имеет два типа слушателей: внутренний (29092) и внешний (9092)

## CDC (Change Data Capture)

### Debezium

- Сервис для отслеживания изменений в базе данных
- Используется для захвата изменений из PostgreSQL
- Работает на порту 8083
- Подключается к Kafka для отправки изменений
- Имеет конфигурацию в директории `debezium`

## Аналитика

### ClickHouse

- Колоночная база данных для аналитики
- Используется для хранения и анализа больших объемов данных
- Доступна на портах 8123 (HTTP) и 9000 (Native)
- Данные сохраняются в именованном томе `clickhouse_data`
- Имеет скрипты инициализации в директории `init/clickhouse`

### Prometheus

- Система мониторинга и сбора метрик
- Работает на порту 9090
- Хранит метрики в именованном томе `prometheus_data`
- Конфигурация находится в файле `prometheus.yml`

### Grafana

- Платформа для визуализации данных и мониторинга
- Работает на порту 3000
- Имеет предустановленный плагин для работы с ClickHouse
- Данные сохраняются в именованном томе `grafana_data`
- Конфигурация дашбордов находится в директории `grafana/provisioning`


## ETL Процессор

### etl_processor

- Сервис для обработки и трансформации данных
- Зависит от Kafka и ClickHouse
- Использует Python для обработки данных
- Имеет доступ к скриптам в директории `scripts`
- Настроен на автоматический перезапуск при сбоях
